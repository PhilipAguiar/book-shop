(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1398)}])},1398:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var l=a(5893);a(5590);var i=a(5007),n=a(7294),o=a(5615);a(7496);var r=a(5934);a(347);var c=e=>{let{handleAddImage:t}=e,[a,i]=(0,n.useState)(!1),o=e=>{e.preventDefault();let a=document.createElement("input");a.type="file",a.accept="image/*",a.style.display="none",a.addEventListener("change",e=>{var a;let l=null===(a=e.target.files)||void 0===a?void 0:a[0];if(l){let e=URL.createObjectURL(l);t(e)}}),document.body.appendChild(a),a.click(),document.body.removeChild(a)};return(0,l.jsxs)("div",{className:"upload-box ".concat(a?"over":""),onDragOver:e=>{e.preventDefault(),a||i(!0)},onDragEnter:e=>{e.preventDefault(),i(!0)},onDragLeave:e=>{e.preventDefault(),i(!1)},onDrop:e=>{e.preventDefault(),i(!1);let a=e.dataTransfer.files[0];if(a){let e=URL.createObjectURL(a);t(e)}},children:[(0,l.jsx)("p",{children:"Drag and drop to upload"}),(0,l.jsx)("button",{type:"button",className:"button",onClick:e=>{o(e)},children:"Upload"}),(0,l.jsx)("p",{children:"PNG, JPG, JPEG"})]})},s=e=>{let{isActive:t,setAddBookActive:a}=e,s=(0,i.I0)(),[d,u]=(0,n.useState)({id:(0,r.Z)(),title:"",author:"",description:"",image:"",price:0,category:""});return(0,l.jsx)("div",{className:"modal ".concat(t&&"modal--open"),children:(0,l.jsxs)("div",{className:"modal__content",children:[(0,l.jsx)("h2",{children:"Add Book"}),(0,l.jsxs)("div",{className:"modal__input-container",children:[(0,l.jsx)("label",{children:"Title"}),(0,l.jsx)("input",{required:!0,type:"text",id:"title",placeholder:"Title",value:d.title,onChange:e=>u({...d,title:e.target.value})}),(0,l.jsx)("label",{children:"Author"}),(0,l.jsx)("input",{required:!0,type:"text",id:"author",placeholder:"Author",value:d.author,onChange:e=>u({...d,author:e.target.value})}),(0,l.jsx)("label",{children:"Description"}),(0,l.jsx)("textarea",{placeholder:"Description",value:d.description,onChange:e=>u({...d,description:e.target.value})}),(0,l.jsx)("label",{children:"Price"}),(0,l.jsx)("input",{required:!0,type:"number",id:"price",placeholder:"Price",value:d.price,onChange:e=>u({...d,price:Number(e.target.value)})}),(0,l.jsx)("label",{children:"Category"}),(0,l.jsx)("input",{required:!0,type:"text",id:"category",placeholder:"Category",value:d.category,onChange:e=>u({...d,category:e.target.value})}),(0,l.jsx)(c,{handleAddImage:e=>{u(t=>({...t,image:e}))}})]}),(0,l.jsx)("button",{className:"modal__button",disabled:(()=>{let{author:e,category:t,description:a,image:l,price:i,title:n}=d;return!e||!t||!a||!l||!i||!n})(),type:"button",onClick:()=>{s((0,o.TA)(d)),u({id:(0,r.Z)(),title:"",author:"",description:"",image:"",price:0,category:""}),a(!1)},children:"Add Book"}),(0,l.jsx)("button",{className:"close-button",onClick:()=>{a(!1)},children:"Close"})]})})},d=e=>{let{isActive:t,setEditBookActive:a,book:r}=e,s=(0,i.I0)(),[d,u]=(0,n.useState)(r);return(0,l.jsx)("div",{className:"modal ".concat(t&&"modal--open"),children:(0,l.jsxs)("div",{className:"modal__content",children:[(0,l.jsx)("h2",{children:"Edit Book"}),(0,l.jsxs)("form",{children:[(0,l.jsxs)("div",{className:"modal__input-container",children:[(0,l.jsx)("label",{children:"Title"}),(0,l.jsx)("input",{type:"text",id:"title",placeholder:"Title",value:d.title,onChange:e=>u({...d,title:e.target.value})}),(0,l.jsx)("label",{children:"Author"}),(0,l.jsx)("input",{type:"text",id:"author",placeholder:"Author",value:d.author,onChange:e=>u({...d,author:e.target.value})}),(0,l.jsx)("label",{children:"Description"}),(0,l.jsx)("textarea",{placeholder:"Description",value:d.description,onChange:e=>u({...d,description:e.target.value})}),(0,l.jsx)("label",{children:"Price"}),(0,l.jsx)("input",{type:"text",id:"price",placeholder:"Price",value:d.price,onChange:e=>u({...d,price:Number(e.target.value)})}),(0,l.jsx)("label",{children:"Category"}),(0,l.jsx)("input",{type:"text",id:"category",placeholder:"Category",value:d.category,onChange:e=>u({...d,category:e.target.value})})]}),(0,l.jsx)(c,{handleAddImage:e=>{u(t=>({...t,image:e}))}}),(0,l.jsx)("button",{className:"modal__button",disabled:(()=>{let{author:e,category:t,description:a,image:l,price:i,title:n}=d;return!e||!t||!a||!l||!i||!n})(),type:"button",onClick:()=>{s((0,o.eB)(d)),a(!1)},children:"Edit Book"})]}),(0,l.jsx)("button",{className:"close-button",onClick:()=>{a(!1)},children:"Close"})]})})};a(7556);var u=function(e){let{book:t,handleBookClick:a,setEditBookActive:n}=e,r=(0,i.I0)(),c=(e,t)=>{e.stopPropagation(),r((0,o.fy)(t))};return(0,l.jsxs)("div",{className:"book",onClick:()=>{n(!0),a(t.id)},children:[(0,l.jsx)("img",{className:"book__image",src:t.image,alt:""}),(0,l.jsxs)("h3",{children:[t.title," by ",t.author]}),(0,l.jsx)("p",{children:t.description}),(0,l.jsx)("p",{children:t.category}),(0,l.jsxs)("p",{children:[t.price,"$"]}),(0,l.jsx)("button",{className:"book__button",onClick:e=>{c(e,t.id)},children:"Delete book?"})]},t.id)};function h(){let e=(0,i.I0)(),{books:t,status:a,error:r}=(0,i.v9)(e=>e.books),[c,h]=(0,n.useState)(!1),[p,x]=(0,n.useState)(!1),[j,v]=(0,n.useState)();(0,n.useEffect)(()=>{e((0,o.yt)())},[e]);let g=e=>{v(t.find(t=>t.id===e))};return(0,l.jsxs)("div",{className:"home",children:[(0,l.jsx)("h1",{className:"home__title",children:"My Bookstore"}),(0,l.jsx)("button",{className:"home__button",onClick:()=>{h(!0)},children:"Add New Book"}),"loading"===a&&(0,l.jsx)("p",{children:"Loading..."}),"failed"===a&&(0,l.jsxs)("p",{children:["Error: ",r]}),"success"===a&&(0,l.jsx)("div",{className:"home__book-container",children:t&&t.length>0&&t.map(e=>(0,l.jsx)(u,{book:e,setEditBookActive:x,handleBookClick:g},e.id))}),(0,l.jsx)(s,{isActive:c,setAddBookActive:h}),j&&(0,l.jsx)(d,{isActive:p,setEditBookActive:x,book:j})]})}},7496:function(){},7556:function(){},347:function(){},5590:function(){}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);